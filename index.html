<!doctype html>
<html lang="bn">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="description" content="A mobile-first accounting/ledger system with Bengali language support">
  <title>আজকের হিসাব</title>
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json" />
  
  <!-- Theme Color -->
  <meta name="theme-color" content="#0b1020" id="meta-theme-color">
  
  <!-- iOS Specific Meta Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="হিসাব">
  <link rel="apple-touch-icon" href="/Hisab/app-icon-192.png">
  
  <!-- Stylesheet -->
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <!-- Particle Background -->
  <div id="particles" class="particles"></div>
  
  <!-- STARTUP / SPLASH SCREEN -->
  <div id="splash" class="splash" role="button" tabindex="0" aria-label="Tap anywhere to continue">
    <div class="splash-card">
      <img src="logo.png" alt="logo" class="splash-logo" width="88" height="88" onerror="this.style.display='none'" />
      <h1 class="splash-title">আজকের হিসাব কি তোর বাপ করব ?</h1>
      <button id="tapStart" class="btn-ghost" aria-label="Tap anywhere to continue">_যেখানে খুশি টিবি দে!!_</button>
    </div>
  </div>

  <!-- APP -->
  <div id="app" class="app hidden">
    <!-- Dynamic Island Navigation -->
    <header class="dyn-island" role="navigation">
      <div class="left" id="logoArea" tabindex="0" title="Open month panel">
        <img src="logo.png" alt="logo" class="nav-logo" width="36" height="36" onerror="this.style.display='none'" />
      </div>

      <div class="center">
        <div class="app-title">Baler Hisab</div>
      </div>

      <div class="right">
        <!-- Theme toggle SVG -->
        <button id="themeBtn" class="icon-btn" aria-label="Toggle theme" title="Theme">
          <svg id="themeIcon" width="22" height="22" viewBox="0 0 24 24" style="animation: iconFloat 3s ease-in-out infinite">
            <path id="themeIconPath" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" fill="currentColor" />
          </svg>
        </button>

        <!-- Language toggle -->
        <button id="langBtn" class="icon-btn" aria-label="Toggle language" title="Language">
          <svg width="22" height="22" viewBox="0 0 24 24" style="animation: iconFloat 3s ease-in-out 0.5s infinite">
            <path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z" fill="currentColor" />
          </svg>
        </button>

        <!-- Reminder button -->
        <button id="reminderBtn" class="icon-btn" aria-label="Reminder" title="Reminder">
          <svg width="22" height="22" viewBox="0 0 24 24" style="animation: iconPulse 2s ease-in-out 1s infinite">
            <path d="M12 2a7 7 0 017 7v4l1.5 1.5v1H3.5v-1L5 13V9a7 7 0 017-7zm-1 18h2v2h-2v-2z" fill="currentColor" />
          </svg>
        </button>
      </div>
    </header>

    <!-- Month panel -->
    <div id="monthPanel" class="month-panel hidden" aria-hidden="true">
      <div class="month-input-wrapper">
        <input type="month" id="monthSelector" class="month-input" aria-label="Select month" />
        <div id="filledMonths" class="filled-months"></div>
      </div>
    </div>

    <!-- Main -->
    <main class="main">
      <div id="displayMonth" class="display-month"></div>
      <section class="controls">
        <div class="button-row">
          <button id="addRow" class="btn">Add Row</button>
          <button id="saveBtn" class="btn secondary">Save</button>
          <button id="downloadBtn" class="btn accent">Download (.txt)</button>
        </div>
      </section>

      <section class="table-wrap">
        <table id="ledgerTable" class="ledger" tabindex="0" aria-label="Ledger table">
          <thead>
            <tr>
              <th>Date</th>
              <th>In Time</th>
              <th>Out Time</th>
              <th>OT Time</th>
              <th>Notes</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="tableBody">
            <!-- dynamic rows -->
          </tbody>
          <tfoot id="tableFoot">
            <!-- totals row generated by JS -->
          </tfoot>
        </table>
      </section>

      <section class="note-area">
        <label for="monthNote">Month Note</label>
        <textarea id="monthNote" placeholder="Add a month-level note..."></textarea>
      </section>

      <section id="monthEndPrompt" class="month-end-prompt hidden">
        <div class="prompt-card">
          <svg width="48" height="48" viewBox="0 0 24 24" style="margin-bottom:8px">
            <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" fill="currentColor"/>
          </svg>
          <h3 class="prompt-title">Month Complete!</h3>
          <p class="prompt-text">All days filled. Download your ledger?</p>
          <button id="promptDownloadBtn" class="btn accent">Download Ledger</button>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="madeby">Made by ✿ "Mʙɪ Dᴀʀᴋ"</div>
      <div class="socials">
        <a href="https://www.facebook.com/mbiboss.1/" class="social" target="_blank" rel="noopener"
          aria-label="Facebook">
          <svg width="18" height="18" viewBox="0 0 24 24">
            <path
              d="M22 12.07C22 6.48 17.52 2 11.93 2 6.34 2 2 6.48 2 12.07c0 4.99 3.66 9.14 8.44 9.93v-7.03H8.9v-2.9h1.54V9.1c0-1.52.9-2.36 2.28-2.36.66 0 1.34.12 1.34.12v1.48h-.76c-.75 0-.98.46-.98.93v1.12h1.66l-.27 2.9h-1.39V22c4.78-.79 8.44-4.95 8.44-9.93z"
              fill="currentColor" />
          </svg>
        </a>
        <a href="https://wa.me/8801317460865" class="social" target="_blank" rel="noopener" aria-label="WhatsApp">
          <svg width="18" height="18" viewBox="0 0 24 24">
            <path
              d="M20.5 3.5C18.1 1.1 14.5 0 11 0 4.9 0 0 4.9 0 11c0 1.9.5 3.7 1.5 5.3L0 24l7.1-1.6c1.5.8 3.1 1.2 4.8 1.2 6.1 0 11-4.9 11-11 0-3.6-1.4-7.2-3.4-9.6zM11 20.6c-1.4 0-2.9-.4-4.1-1.1l-.3-.2-4.2.9.9-4.1-.2-.3C3.1 14.5 2.6 12.3 2.6 11 2.6 6 6 2.6 11 2.6c2.9 0 5.6 1.2 7.6 3.2 2 2 3.2 4.7 3.2 7.6 0 5-3.4 8.4-8.6 8.4z"
              fill="currentColor" />
          </svg>
        </a>
        <a href="https://github.com/mbiboss" class="social" target="_blank" rel="noopener" aria-label="GitHub">
          <svg width="18" height="18" viewBox="0 0 24 24">
            <path
              d="M12 .5C5.4.5 0 5.8 0 12.5c0 5.3 3.4 9.8 8.2 11.4.6.1.8-.3.8-.6v-2.1c-3.3.7-4-1.6-4-1.6-.5-1.4-1.2-1.8-1.2-1.8-1-.6.1-.6.1-.6 1.1.1 1.6 1.1 1.6 1.1 1 .1 1.7.7 2 1 .6.9 1.5.6 1.9.4.1-.7.4-1.1.7-1.3-2.6-.3-5.4-1.3-5.4-5.9 0-1.3.5-2.3 1.3-3.1-.1-.3-.6-1.6.1-3.4 0 0 1-.3 3.4 1.2 1-.3 2-.5 3-.5s2 .2 3 .5c2.4-1.5 3.4-1.2 3.4-1.2.7 1.8.2 3.1.1 3.4.9.8 1.3 1.8 1.3 3.1 0 4.6-2.8 5.6-5.4 5.9.4.3.8 1 .8 2v3c0 .3.2.7.8.6 4.8-1.6 8.2-6.1 8.2-11.4C24 5.8 18.6.5 12 .5z"
              fill="currentColor" />
          </svg>
        </a>
        <a href="https://www.youtube.com/@Bekar_Golpo" class="social" target="_blank" rel="noopener"
          aria-label="YouTube">
          <svg width="18" height="18" viewBox="0 0 24 24">
            <path
              d="M23.5 6.2s-.2-1.6-.8-2.3c-.8-1-1.8-1-2.2-1.1C16.6 2.5 12 2.5 12 2.5h0s-4.6 0-8.5.3c-.4 0-1.5.1-2.2 1.1-.6.7-.8 2.3-.8 2.3S0 8 0 9.9v2.2C0 14 0.1 15.5 0.1 15.5s.2 1.6.8 2.3c.8 1 1.8 1 2.2 1.1 2.9.2 12.4.3 12.4.3s4.6 0 8.5-.3c.4 0 1.5-.1 2.2-1.1.6-.7.8-2.3.8-2.3s.1-1.6.1-3.5V9.9c0-1.9-.1-3.7-.1-3.7zM9.6 14.6V7.2l6.6 3.7-6.6 3.7z"
              fill="currentColor" />
          </svg>
        </a>
        <a href="mailto:ooismailforajioo@gmail.com" class="social" target="_blank" rel="noopener" aria-label="Mail">
          <svg width="18" height="18" viewBox="0 0 24 24">
            <path d="M12 13.5L0 6.2V18c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6.2L12 13.5zM12 11L24 3H0l12 8z"
              fill="currentColor" />
          </svg>
        </a>
      </div>
    </footer>
  </div>

  <!-- Reminder Modal -->
  <div id="reminderModal" class="modal hidden" aria-hidden="true">
    <div class="modal-card">
      <h3 id="reminderTitle">Daily Reminder</h3>
      
      <!-- When reminder exists -->
      <div id="reminderExists" class="reminder-exists hidden">
        <div class="reminder-info">
          <svg width="48" height="48" viewBox="0 0 24 24" style="color: var(--accent1); margin-bottom: 12px">
            <path d="M12 2a7 7 0 017 7v4l1.5 1.5v1H3.5v-1L5 13V9a7 7 0 017-7zm-1 18h2v2h-2v-2z" fill="currentColor" />
          </svg>
          <p class="reminder-label">Reminder set for</p>
          <div class="reminder-time-display" id="reminderTimeDisplay">--:--</div>
        </div>
        <div class="modal-actions">
          <button id="reminderDeleteBtn" class="btn danger">Delete Reminder</button>
          <button id="reminderCloseBtn" class="btn secondary">Close</button>
        </div>
      </div>

      <!-- When no reminder -->
      <div id="reminderEmpty" class="reminder-empty hidden">
        <div class="reminder-setup">
          <svg width="48" height="48" viewBox="0 0 24 24" style="color: var(--muted); margin-bottom: 12px">
            <path d="M12 2a7 7 0 017 7v4l1.5 1.5v1H3.5v-1L5 13V9a7 7 0 017-7zm-1 18h2v2h-2v-2z" fill="currentColor" opacity="0.5"/>
          </svg>
          <p class="reminder-message">No reminder set</p>
          <label for="reminderTime" class="reminder-time-label">Choose time for daily reminder</label>
          <input id="reminderTime" type="time" class="reminder-time-input" />
          <p class="muted">Notifications require browser permission</p>
        </div>
        <div class="modal-actions">
          <button id="reminderSave" class="btn">Set Reminder</button>
          <button id="reminderCancel" class="btn secondary">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Save notification toaster -->
  <div id="toast" class="toast hidden">✅ Saved</div>

  <script src="script.js" defer></script>
</body>

</html>